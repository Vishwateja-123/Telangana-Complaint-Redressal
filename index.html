<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Complaint Redressal System</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* Embedded styles from style.css */
        :root {
          /* Color Scheme */
          --primary-color: #2563eb; /* Blue */
          --primary-dark: #1e40af;
          --primary-light: #3b82f6;
          --secondary-color: #7c3aed; /* Purple */
          --secondary-dark: #6d28d9;
          --accent-color: #f59e0b; /* Amber */
          --danger-color: #d9480f; /* Darker Red/Orange */
          --warning-color: #f59e0b; /* Amber */
          --success-color: #047857; /* Dark Green */
          
          /* Text Colors */
          --text-primary: #000000; /* Pure Black */
          --text-secondary: #4b5563; /* Darker Gray */
          --text-light: #9ca3af; /* Gray */
          
          /* Background Colors */
          --bg-primary: #ffffff; /* White */
          --bg-secondary: #f9fafb; /* Almost White */
          --bg-tertiary: #f3f4f6; /* Very Light Gray */
          --bg-dark: #111827;
          
          /* Border & Shadow */
          --border-color: #d1d5db; /* Darker Gray Border */
          --border-radius: 12px;
          --box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
          --box-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
          
          /* Spacing */
          --spacing-xs: 0.25rem;
          --spacing-sm: 0.5rem;
          --spacing-md: 1rem;
          --spacing-lg: 1.5rem;
          --spacing-xl: 2rem;
          --spacing-2xl: 3rem;
          
          /* Typography */
          --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
          --font-size-xs: 0.75rem;
          --font-size-sm: 0.875rem;
          --font-size-base: 1rem;
          --font-size-lg: 1.125rem;
          --font-size-xl: 1.25rem;
          --font-size-2xl: 1.5rem;
          --font-size-3xl: 2rem;
          
          /* Transitions */
          --transition-fast: 150ms ease-in-out;
          --transition-normal: 250ms ease-in-out;
        }

        /* Dark Mode Variables */
        [data-theme="dark"] {
          --text-primary: #ffffff; /* Pure White */
          --text-secondary: #e5e7eb; /* Lighter Gray */
          --text-light: #9ca3af; /* Gray */
          --bg-primary: #111827; /* Very Dark Blue */
          --bg-secondary: #000000; /* Pure Black */
          --bg-tertiary: #1f2937; /* Dark Gray-Blue */
          --border-color: #4b5563; /* Darker Gray Border */
        }

        /* Reset & Base Styles */
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        body {
          font-family: var(--font-family);
          font-size: var(--font-size-base);
          line-height: 1.6;
          color: var(--text-primary);
          background-color: var(--bg-secondary);
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

        /* Container */
        .container {
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 var(--spacing-lg);
        }

        /* Header */
        header {
          background-color: var(--bg-primary);
          border-bottom: 1px solid var(--border-color);
          padding: var(--spacing-lg) 0;
          position: sticky;
          top: 0;
          z-index: 1000;
          box-shadow: var(--box-shadow);
        }

        .header-content {
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .logo {
          font-size: var(--font-size-xl);
          font-weight: 700;
          color: var(--primary-color);
          text-decoration: none;
          display: flex;
          align-items: center;
          gap: var(--spacing-sm);
        }

        .logo-icon {
          font-size: var(--font-size-2xl);
        }

        .nav-links {
          display: flex;
          gap: var(--spacing-lg);
          align-items: center;
        }

        .nav-links a {
          color: var(--text-secondary);
          text-decoration: none;
          font-weight: 500;
          transition: color var(--transition-fast);
          cursor: pointer;
        }

        .nav-links a:hover {
          color: var(--primary-color);
        }

        .btn-secondary {
          background-color: var(--secondary-color);
          color: white;
        }

        .btn-warning {
          background-color: var(--warning-color);
          color: white;
        }

        .btn-admin {
          background-color: #ffffff; /* White */
          color: #1f2937; /* Dark text */
          border: 2px solid var(--border-color); /* Add a border */
        }

        .btn-admin:hover {
          background-color: #f9fafb; /* Almost White */
          transform: translateY(-2px);
          box-shadow: var(--box-shadow-lg);
          border-color: #9ca3af; /* Darker border on hover */
        }

        .btn:disabled {
          opacity: 0.6;
          cursor: not-allowed;
          transform: none !important;
        }
        
        .btn-sm {
            padding: 0.375rem 0.75rem;
            font-size: var(--font-size-sm);
            border-radius: 8px;
        }
        
        .btn-lg {
            padding: 0.75rem 1.75rem;
            font-size: var(--font-size-lg);
        }

        /* Hero Section */
        .hero {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          padding: var(--spacing-2xl) 0;
          text-align: center;
        }

        .hero h1 {
          font-size: var(--font-size-3xl);
          margin-bottom: var(--spacing-md);
          font-weight: 700;
          color: white; /* Ensure text color is white */
        }

        .hero p {
          font-size: var(--font-size-lg);
          margin-bottom: var(--spacing-xl);
          opacity: 0.95;
        }

        .hero-buttons {
          display: flex;
          gap: var(--spacing-md);
          justify-content: center;
          flex-wrap: wrap;
        }

        /* Features Section */
        .features {
          padding: var(--spacing-2xl) 0;
        }

        .features h2 {
          text-align: center;
          font-size: var(--font-size-2xl);
          margin-bottom: var(--spacing-xl);
          color: var(--text-primary);
        }

        .features-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: var(--spacing-xl);
        }

        .feature-card {
          background-color: var(--bg-primary);
          padding: var(--spacing-xl);
          border-radius: var(--border-radius);
          box-shadow: var(--box-shadow);
          transition: transform var(--transition-normal), box-shadow var(--transition-normal);
          border: 1px solid var(--border-color);
        }

        .feature-card:hover {
          transform: translateY(-5px);
          box-shadow: var(--box-shadow-lg);
        }

        .feature-icon {
          font-size: 2.5rem;
          margin-bottom: var(--spacing-md);
        }

        .feature-card h3 {
          font-size: var(--font-size-xl);
          margin-bottom: var(--spacing-sm);
          color: var(--text-primary);
        }

        .feature-card p {
          color: var(--text-secondary);
          line-height: 1.6;
          margin: 0; /* Reset margin for p in card */
        }

        /* Forms */
        .form-container {
          max-width: 500px;
          margin: var(--spacing-2xl) auto;
          background-color: var(--bg-primary);
          padding: var(--spacing-xl);
          border-radius: var(--border-radius);
          box-shadow: var(--box-shadow-lg);
        }

        .form-container h2 {
          text-align: center;
          margin-bottom: var(--spacing-xl);
          color: var(--text-primary);
        }

        .form-group {
          margin-bottom: var(--spacing-lg);
        }

        .form-group label {
          display: block;
          margin-bottom: var(--spacing-sm);
          font-weight: 500;
          color: var(--text-primary);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
          width: 100%;
          padding: 0.75rem;
          border: 1px solid var(--border-color);
          border-radius: var(--border-radius);
          font-size: var(--font-size-base);
          font-family: var(--font-family);
          background-color: var(--bg-primary);
          color: var(--text-primary);
          transition: border-color var(--transition-fast);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
          outline: none;
          border-color: var(--primary-color);
          box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        
        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: var(--text-light);
            opacity: 1;
        }

        .form-group textarea {
          resize: vertical;
          min-height: 100px;
        }

        .form-actions {
          display: flex;
          gap: var(--spacing-md);
          margin-top: var(--spacing-xl);
        }

        .form-actions .btn {
          flex: 1;
        }

        .form-link {
          text-align: center;
          margin-top: var(--spacing-lg);
          color: var(--text-secondary);
        }

        .form-link a {
          color: var(--primary-color);
          text-decoration: none;
          font-weight: 500;
          cursor: pointer;
        }

        .form-link a:hover {
          text-decoration: underline;
        }

        /* Dashboard */
        .dashboard {
          padding: var(--spacing-xl) 0;
        }

        .dashboard-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: var(--spacing-xl);
          flex-wrap: wrap;
          gap: var(--spacing-md);
        }

        .dashboard-header h2 {
          font-size: var(--font-size-2xl);
          color: var(--text-primary);
        }

        .dashboard-actions {
          display: flex;
          gap: var(--spacing-md);
          flex-wrap: wrap;
        }

        /* Stats Grid */
        .stats-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: var(--spacing-lg);
          margin-bottom: var(--spacing-xl);
        }

        .stat-card {
          background-color: var(--bg-primary);
          padding: var(--spacing-lg);
          border-radius: var(--border-radius);
          box-shadow: var(--box-shadow);
          border: 1px solid var(--border-color);
        }

        .stat-card h3 {
          font-size: var(--font-size-sm);
          color: var(--text-secondary);
          font-weight: 500;
          margin-bottom: var(--spacing-sm);
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .stat-card .stat-value {
          font-size: var(--font-size-3xl);
          font-weight: 700;
          color: var(--primary-color);
        }

        /* Complaints List */
        .complaints-section {
          margin-top: var(--spacing-xl);
        }

        .complaints-section h3 {
          font-size: var(--font-size-xl);
          margin-bottom: var(--spacing-lg);
          color: var(--text-primary);
        }

        .complaints-list {
          display: flex;
          flex-direction: column;
          gap: var(--spacing-lg);
        }

        .complaint-card {
          background-color: var(--bg-primary);
          padding: var(--spacing-lg);
          border-radius: var(--border-radius);
          box-shadow: var(--box-shadow);
          border: 1px solid var(--border-color);
          transition: box-shadow var(--transition-normal);
        }

        .complaint-card:hover {
          box-shadow: var(--box-shadow-lg);
        }

        .complaint-header {
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
          margin-bottom: var(--spacing-md);
          flex-wrap: wrap;
          gap: var(--spacing-md);
        }

        .complaint-title {
          font-size: var(--font-size-lg);
          font-weight: 600;
          color: var(--text-primary);
          margin-bottom: var(--spacing-xs);
        }

        .complaint-id {
          font-size: var(--font-size-sm);
          color: var(--text-light);
        }

        .complaint-meta {
          display: flex;
          gap: var(--spacing-md);
          margin-bottom: var(--spacing-md);
          flex-wrap: wrap;
        }

        .complaint-meta span {
          display: flex;
          align-items: center;
          gap: var(--spacing-xs);
          font-size: var(--font-size-sm);
          color: var(--text-secondary);
        }
        
        .complaint-meta span strong {
            color: var(--text-primary);
            font-weight: 500;
        }

        .complaint-description {
          color: var(--text-secondary);
          line-height: 1.6;
          margin-bottom: var(--spacing-md);
        }

        .complaint-actions {
          display: flex;
          gap: var(--spacing-sm);
          flex-wrap: wrap;
          margin-top: var(--spacing-md);
        }

        /* Status Badge */
        .status-badge {
          padding: 0.375rem 0.75rem;
          border-radius: 9999px;
          font-size: var(--font-size-xs);
          font-weight: 600;
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .status-pending {
          background-color: #fef3c7;
          color: #92400e;
        }

        .status-in-progress {
          background-color: #dbeafe;
          color: #1e40af;
        }

        .status-resolved {
          background-color: #d1fae5;
          color: #065f46;
        }

        /* Priority Badge */
        .priority-badge {
          padding: 0.375rem 0.75rem;
          border-radius: 9999px;
          font-size: var(--font-size-xs);
          font-weight: 600;
          text-transform: uppercase;
        }

        .priority-low {
          background-color: #e5e7eb;
          color: #374151;
        }

        .priority-medium {
          background-color: #fef3c7;
          color: #92400e;
        }

        .priority-high {
          background-color: #fee2e2;
          color: #991b1b;
        }

        /* Modal */
        .modal-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: rgba(0, 0, 0, 0.5);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 2000;
          padding: var(--spacing-lg);
        }

        .modal-content {
          background-color: var(--bg-primary);
          border-radius: var(--border-radius);
          box-shadow: var(--box-shadow-lg);
          max-width: 600px;
          width: 100%;
          max-height: 90vh;
          overflow-y: auto;
          padding: var(--spacing-xl);
        }

        .modal-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: var(--spacing-lg);
        }

        .modal-header h3 {
          font-size: var(--font-size-xl);
          color: var(--text-primary);
        }

        .modal-close {
          background: none;
          border: none;
          font-size: var(--font-size-2xl);
          cursor: pointer;
          color: var(--text-secondary);
          padding: 0;
          width: 32px;
          height: 32px;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 50%;
          transition: background-color var(--transition-fast);
        }

        .modal-close:hover {
          background-color: var(--bg-tertiary);
        }

        /* Notifications */
        .notification {
          position: fixed;
          top: var(--spacing-lg);
          right: var(--spacing-lg);
          padding: var(--spacing-lg);
          border-radius: var(--border-radius);
          box-shadow: var(--box-shadow-lg);
          z-index: 3000;
          min-width: 300px;
          animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
          from {
            transform: translateX(400px);
            opacity: 0;
          }
          to {
            transform: translateX(0);
            opacity: 1;
          }
        }

        .notification-success {
          background-color: #d1fae5;
          color: #065f46;
          border-left: 4px solid var(--success-color);
        }

        .notification-error {
          background-color: #fee2e2;
          color: #991b1b;
          border-left: 4px solid var(--danger-color);
        }

        .notification-info {
          background-color: #dbeafe;
          color: #1e40af;
          border-left: 4px solid var(--primary-color);
        }

        /* Loading Spinner */
        .spinner {
          border: 3px solid var(--border-color);
          border-top: 3px solid var(--primary-color);
          border-radius: 50%;
          width: 40px;
          height: 40px;
          animation: spin 1s linear infinite;
          margin: var(--spacing-xl) auto;
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
          text-align: center;
          padding: var(--spacing-2xl);
          color: var(--text-secondary);
        }

        .empty-state-icon {
          font-size: 4rem;
          margin-bottom: var(--spacing-md);
          opacity: 0.5;
        }

        .empty-state h3 {
          font-size: var(--font-size-xl);
          margin-bottom: var(--spacing-sm);
          color: var(--text-primary);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
          .header-content {
            flex-direction: column;
            gap: var(--spacing-md);
          }
          
          .nav-links {
            flex-wrap: wrap;
            justify-content: center;
          }
          
          .hero h1 {
            font-size: var(--font-size-2xl);
          }
          
          .hero p {
            font-size: var(--font-size-base);
          }
          
          .features-grid {
            grid-template-columns: 1fr;
          }
          
          .dashboard-header {
            flex-direction: column;
            align-items: flex-start;
          }
          
          .stats-grid {
            grid-template-columns: 1fr;
          }
          
          .complaint-header {
            flex-direction: column;
            align-items: flex-start;
          }
          
          .form-actions {
            flex-direction: column;
          }
        }

        /* Utility Classes */
        .text-center {
          text-align: center;
        }

        .mt-1 { margin-top: var(--spacing-sm); }
        .mt-2 { margin-top: var(--spacing-md); }
        .mt-3 { margin-top: var(--spacing-lg); }
        .mb-1 { margin-bottom: var(--spacing-sm); }
        .mb-2 { margin-bottom: var(--spacing-md); }
        .mb-3 { margin-bottom: var(--spacing-lg); }

        .hidden {
          display: none;
        }

        .flex {
          display: flex;
        }

        .flex-wrap {
          flex-wrap: wrap;
        }

        .gap-1 { gap: var(--spacing-sm); }
        .gap-2 { gap: var(--spacing-md); }
        .gap-3 { gap: var(--spacing-lg); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script>
        // Embedded script from app.js
        
        // Online Complaint Redressal System - Complete Application

        // ========== STATE MANAGEMENT ==========
        const state = {
          currentUser: null,
          currentPage: 'home',
          complaints: [
            {
              id: 'CMP001',
              userId: 'kumar@example.com',
              title: 'Broken Street Light',
              category: 'Infrastructure',
              priority: 'High',
              status: 'In Progress',
              location: 'Hanamkonda, Warangal',
              description: 'The street light near the park has been broken for a week causing safety concerns.',
              dateSubmitted: '2025-11-05',
              lastUpdated: '2025-11-08',
              assignedDepartment: 'Municipal Corp (GWMC)',
              adminComments: 'Team dispatched to fix the issue.',
              userFeedback: null,
              rating: null
            },
            {
              id: 'CMP002',
              userId: 'priya@example.com',
              title: 'Water Supply Shortage',
              category: 'Water Supply',
              priority: 'High',
              status: 'Pending',
              location: 'Balanagar, Hyderabad',
              description: 'No water supply for the past 3 days in our area.',
              dateSubmitted: '2025-11-07',
              lastUpdated: '2025-11-07',
              assignedDepartment: null,
              adminComments: null,
              userFeedback: null,
              rating: null
            }
          ],
          users: [
            { email: 'kumar@example.com', password: 'kumar123', name: 'Kumar Reddy', role: 'user' },
            { email: 'priya@example.com', password: 'priya123', name: 'Priya Rao', role: 'user' },
            { email: 'admin@system.com', password: 'admin123', name: 'Admin User', role: 'admin' }
          ],
          notifications: []
        };

        // ========== UTILITY FUNCTIONS ==========
        function generateComplaintId() {
          const count = state.complaints.length + 1;
          return `CMP${String(count).padStart(3, '0')}`;
        }

        function getCurrentDate() {
          return new Date().toISOString().split('T')[0];
        }

        function showNotification(message, type = 'info') {
          const notification = document.createElement('div');
          notification.className = `notification notification-${type}`;
          notification.textContent = message;
          document.body.appendChild(notification);
          
          setTimeout(() => {
            notification.remove();
          }, 3000);
        }

        function navigate(page) {
          state.currentPage = page;
          render();
        }

        // ========== AUTHENTICATION ==========
        function login(email, password, expectedRole) {
          const user = state.users.find(u => u.email === email && u.password === password);
          
          if (!user) {
            showNotification('Invalid email or password', 'error');
            return false;
          }
          
          if (user.role !== expectedRole) {
            showNotification(`This is ${expectedRole === 'admin' ? 'Admin' : 'User'} login only`, 'error');
            return false;
          }
          
          state.currentUser = user;
          showNotification(`Welcome ${user.name}!`, 'success');
          navigate(user.role === 'admin' ? 'admin-dashboard' : 'user-dashboard');
          return true;
        }

        function register(email, password, name) {
          if (state.users.find(u => u.email === email)) {
            showNotification('Email already registered', 'error');
            return false;
          }
          
          const newUser = { email, password, name, role: 'user' };
          state.users.push(newUser);
          showNotification('Registration successful! Please login.', 'success');
          navigate('login');
          return true;
        }

        function logout() {
          state.currentUser = null;
          showNotification('Logged out successfully', 'info');
          navigate('home');
        }

        // ========== COMPLAINT MANAGEMENT ==========
        function submitComplaint(complaintData) {
          const newComplaint = {
            id: generateComplaintId(),
            userId: state.currentUser.email,
            ...complaintData,
            status: 'Pending',
            dateSubmitted: getCurrentDate(),
            lastUpdated: getCurrentDate(),
            assignedDepartment: null,
            adminComments: null,
            userFeedback: null,
            rating: null
          };
          
          state.complaints.push(newComplaint);
          showNotification('Complaint submitted successfully!', 'success');
          navigate('user-dashboard');
        }

        function updateComplaintStatus(complaintId, status, adminComments, department) {
          const complaint = state.complaints.find(c => c.id === complaintId);
          if (complaint) {
            complaint.status = status;
            complaint.adminComments = adminComments;
            complaint.assignedDepartment = department;
            complaint.lastUpdated = getCurrentDate();
            showNotification('Complaint updated successfully!', 'success');
            render();
          }
        }

        function submitFeedback(complaintId, feedback, rating) {
          const complaint = state.complaints.find(c => c.id === complaintId);
          if (complaint) {
            complaint.userFeedback = feedback;
            complaint.rating = rating;
            showNotification('Thank you for your feedback!', 'success');
            render();
          }
        }

        function getUserComplaints() {
          return state.complaints.filter(c => c.userId === state.currentUser.email);
        }

        function getComplaintStats() {
          const userComplaints = getUserComplaints();
          return {
            total: userComplaints.length,
            pending: userComplaints.filter(c => c.status === 'Pending').length,
            inProgress: userComplaints.filter(c => c.status === 'In Progress').length,
            resolved: userComplaints.filter(c => c.status === 'Resolved').length
          };
        }

        function getAdminStats() {
          return {
            total: state.complaints.length,
            pending: state.complaints.filter(c => c.status === 'Pending').length,
            inProgress: state.complaints.filter(c => c.status === 'In Progress').length,
            resolved: state.complaints.filter(c => c.status === 'Resolved').length
          };
        }

        // ========== UI COMPONENTS ==========
        function createHeader() {
          const isLoggedIn = state.currentUser !== null;
          const isAdmin = state.currentUser?.role === 'admin';
          
          return `
            <header>
              <div class="container">
                <div class="header-content">
                  <a href="#" class="logo" onclick="navigate('home'); return false;">
                    <span class="logo-icon">üéØ</span>
                    <span>Telangana Complaint System</span>
                  </a>
                  <nav class="nav-links">
                    ${isLoggedIn ? `
                      <a onclick="navigate('${isAdmin ? 'admin-dashboard' : 'user-dashboard'}'); return false;">Dashboard</a>
                      ${!isAdmin ? '<a onclick="navigate(\'submit-complaint\'); return false;">Submit Complaint</a>' : ''}
                      <a onclick="logout(); return false;" class="btn btn-danger">Logout</a>
                    ` : `
                      <a onclick="navigate('login'); return false;" class="btn btn-primary">Login</a>
                      <a onclick="navigate('admin-login'); return false;" class="btn btn-admin">Admin Login</a>
                      <a onclick="navigate('register'); return false;" class="btn btn-outline">Register</a>
                    `}
                  </nav>
                </div>
              </div>
            </header>
          `;
        }

        function createHomePage() {
          return `
            <div class="hero">
              <div class="container">
                <h1>Online Complaint Redressal System</h1>
                <p>Your voice matters. Report issues and track their resolution in real-time.</p>
                <div class="hero-buttons">
                  <button class="btn btn-primary btn-lg" onclick="navigate('login')">Get Started</button>
                  <button class="btn btn-admin btn-lg" onclick="navigate('admin-login')">Admin Portal</button>
                </div>
              </div>
            </div>
            
            <section class="features">
              <div class="container">
                <h2>Why Choose Our System?</h2>
                <div class="features-grid">
                  <div class="feature-card">
                    <div class="feature-icon">üìù</div>
                    <h3>Easy Submission</h3>
                    <p>Submit complaints with detailed information and attachments in just a few clicks.</p>
                  </div>
                  <div class="feature-card">
                    <div class="feature-icon">üîç</div>
                    <h3>Real-time Tracking</h3>
                    <p>Track the status of your complaints and receive instant notifications on updates.</p>
                  </div>
                  <div class="feature-card">
                    <div class="feature-icon">‚ö°</div>
                    <h3>Quick Resolution</h3>
                    <p>Our efficient system ensures your issues are addressed promptly by the right department.</p>
                  </div>
                  <div class="feature-card">
                    <div class="feature-icon">üìä</div>
                    <h3>Analytics Dashboard</h3>
                    <p>View comprehensive statistics and insights about your complaints and their resolution.</p>
                  </div>
                  <div class="feature-card">
                    <div class="feature-icon">üîí</div>
                    <h3>Secure &amp; Private</h3>
                    <p>Your data is protected with industry-standard security measures.</p>
                  </div>
                  <div class="feature-card">
                    <div class="feature-icon">üí¨</div>
                    <h3>Feedback System</h3>
                    <p>Rate and provide feedback on resolved complaints to help us improve.</p>
                  </div>
                </div>
              </div>
            </section>
          `;
        }

        function createLoginPage() {
          return `
            <div class="container">
              <div class="form-container">
                <h2>User Login</h2>
                <form onsubmit="handleLogin(event)">
                  <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" required placeholder="kumar@example.com">
                  </div>
                  <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" required placeholder="Enter your password">
                  </div>
                  <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Login</button>
                  </div>
                </form>
                <div class="form-link">
                  Don't have an account? <a onclick="navigate('register'); return false;">Register here</a>
                </div>
                <div class="form-link">
                  <small>Demo: kumar@example.com / kumar123</small>
                </div>
              </div>
            </div>
          `;
        }

        function createAdminLoginPage() {
          return `
            <div class="container">
              <div class="form-container">
                <h2>Admin Login</h2>
                <form onsubmit="handleAdminLogin(event)">
                  <div class="form-group">
                    <label for="admin-email">Admin Email</label>
                    <input type="email" id="admin-email" name="email" required placeholder="admin@system.com">
                  </div>
                  <div class="form-group">
                    <label for="admin-password">Password</label>
                    <input type="password" id="admin-password" name="password" required placeholder="Enter admin password">
                  </div>
                  <div class="form-actions">
                    <button type="submit" class="btn btn-admin">Admin Login</button>
                  </div>
                </form>
                <div class="form-link">
                  <small>Demo: admin@system.com / admin123</small>
                </div>
              </div>
            </div>
          `;
        }

        function createRegisterPage() {
          return `
            <div class="container">
              <div class="form-container">
                <h2>Create Account</h2>
                <form onsubmit="handleRegister(event)">
                  <div class="form-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" name="name" required placeholder="Kumar Reddy">
                  </div>
                  <div class="form-group">
                    <label for="reg-email">Email Address</label>
                    <input type="email" id="reg-email" name="email" required placeholder="kumar@example.com">
                  </div>
                  
                  <div class="form-group">
                    <label for="reg-password">Password</label>
                    <input type="password" id="reg-password" name="password" required placeholder="Create a password">
                  </div>
                  <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Register</button>
                  </div>
                </form>
                <div class="form-link">
                  Already have an account? <a onclick="navigate('login'); return false;">Login here</a>
                </div>
              </div>
            </div>
          `;
        }

        function createUserDashboard() {
          const stats = getComplaintStats();
          const userComplaints = getUserComplaints();
          
          return `
            <div class="dashboard">
              <div class="container">
                <div class="dashboard-header">
                  <h2>Welcome, ${state.currentUser.name}</h2>
                  <div class="dashboard-actions">
                    <button class="btn btn-primary" onclick="navigate('submit-complaint')">Submit New Complaint</button>
                  </div>
                </div>
                
                <div class="stats-grid">
                  <div class="stat-card">
                    <h3>Total Complaints</h3>
                    <div class="stat-value">${stats.total}</div>
                  </div>
                  <div class="stat-card">
                    <h3>Pending</h3>
                    <div class="stat-value" style="color: var(--warning-color);">${stats.pending}</div>
                  </div>
                  <div class="stat-card">
                    <h3>In Progress</h3>
                    <div class="stat-value" style="color: var(--primary-color);">${stats.inProgress}</div>
                  </div>
                  <div class="stat-card">
                    <h3>Resolved</h3>
                    <div class="stat-value" style="color: var(--success-color);">${stats.resolved}</div>
                  </div>
                </div>
                
                <div class="complaints-section">
                  <h3>Your Complaints</h3>
                  ${userComplaints.length > 0 ? `
                    <div class="complaints-list">
                      ${userComplaints.map(complaint => createComplaintCard(complaint, false)).join('')}
                    </div>
                  ` : `
                    <div class="empty-state">
                      <div class="empty-state-icon">üì≠</div>
                      <h3>No Complaints Yet</h3>
                      <p>You haven't submitted any complaints. Click the button above to submit your first complaint.</p>
                    </div>
                  `}
                </div>
              </div>
            </div>
          `;
        }

        function createAdminDashboard() {
          const stats = getAdminStats();
          
          return `
            <div class="dashboard">
              <div class="container">
                <div class="dashboard-header">
                  <h2>Admin Dashboard</h2>
                </div>
                
                <div class="stats-grid">
                  <div class="stat-card">
                    <h3>Total Complaints</h3>
                    <div class="stat-value">${stats.total}</div>
                  </div>
                  <div class="stat-card">
                    <h3>Pending</h3>
                    <div class="stat-value" style="color: var(--warning-color);">${stats.pending}</div>
                  </div>
                  <div class="stat-card">
                    <h3>In Progress</h3>
                    <div class="stat-value" style="color: var(--primary-color);">${stats.inProgress}</div>
                  </div>
                  <div class="stat-card">
                    <h3>Resolved</h3>
                    <div class="stat-value" style="color: var(--success-color);">${stats.resolved}</div>
                  </div>
                </div>
                
                <div class="complaints-section">
                  <h3>All Complaints</h3>
                  ${state.complaints.length > 0 ? `
                    <div class="complaints-list">
                      ${state.complaints.map(complaint => createComplaintCard(complaint, true)).join('')}
                    </div>
                  ` : `
                    <div class="empty-state">
                      <div class="empty-state-icon">üì≠</div>
                      <h3>No Complaints</h3>
                      <p>There are no complaints in the system yet.</p>
                    </div>
                  `}
                </div>
              </div>
            </div>
          `;
        }

        function createComplaintCard(complaint, isAdmin) {
          const canProvideFeedback = complaint.status === 'Resolved' && !complaint.userFeedback && !isAdmin;
          
          return `
            <div class="complaint-card">
              <div class="complaint-header">
                <div>
                  <div class="complaint-title">${complaint.title}</div>
                  <div class="complaint-id">ID: ${complaint.id}</div>
                </div>
                <div class="flex gap-1 flex-wrap">
                  <span class="status-badge status-${complaint.status.toLowerCase().replace(' ', '-')}">
                    ${complaint.status}
                  </span>
                  <span class="priority-badge priority-${complaint.priority.toLowerCase()}">
                    ${complaint.priority} Priority
                  </span>
                </div>
              </div>
              
              <div class="complaint-meta">
                <span>üìÅ ${complaint.category}</span>
                <span>üìç ${complaint.location}</span>
                <span>üìÖ ${complaint.dateSubmitted}</span>
                ${isAdmin ? `<span>üë§ ${complaint.userId}</span>` : ''}
              </div>
              
              <div class="complaint-description">${complaint.description}</div>
              
              ${complaint.assignedDepartment ? `
                <div class="complaint-meta">
                  <span><strong>Department:</strong> ${complaint.assignedDepartment}</span>
                </div>
              ` : ''}
              
              ${complaint.adminComments ? `
                <div class="complaint-meta">
                  <span><strong>Admin Comments:</strong> ${complaint.adminComments}</span>
                </div>
              ` : ''}
              
              ${complaint.userFeedback ? `
                <div class="complaint-meta" style="background: var(--bg-secondary); padding: var(--spacing-md); border-radius: var(--border-radius); margin-top: var(--spacing-md);">
                  <div><strong>User Feedback:</strong> ${complaint.userFeedback}</div>
                  <div><strong>Rating:</strong> ${'‚≠ê'.repeat(complaint.rating)}</div>
                </div>
              ` : ''}
              
              <div class="complaint-actions">
                ${isAdmin ? `
                  <button class="btn btn-primary btn-sm" onclick='showUpdateModal(${JSON.stringify(complaint).replace(/'/g, "\\'")})'>Update Status</button>
                ` : ''}
                ${canProvideFeedback ? `
                  <button class="btn btn-secondary btn-sm" onclick="showFeedbackModal('${complaint.id}')">Provide Feedback</button>
                ` : ''}
              </div>
            </div>
          `;
        }

        function createSubmitComplaintPage() {
          return `
            <div class="container">
              <div class="form-container">
                <h2>Submit New Complaint</h2>
                <form onsubmit="handleSubmitComplaint(event)">
                  <div class="form-group">
                    <label for="title">Complaint Title</label>
                    <input type="text" id="title" name="title" required placeholder="Brief description of the issue">
                  </div>
                  
                  <div class="form-group">
                    <label for="category">Category</label>
                    <select id="category" name="category" required>
                      <option value="">Select a category</option>
                      <option value="Infrastructure">Infrastructure</option>
                      <option value="Water Supply (Mission Bhagiratha)">Water Supply (Mission Bhagiratha)</option>
                      <option value="Electricity (TSSPDCL/TSNPDCL)">Electricity (TSSPDCL/TSNPDCL)</option>
                      <option value="Sanitation (GHMC/GWMC)">Sanitation (GHMC/GWMC)</option>
                      <option value="Roads (R&B)">Roads (R&B)</option>
                      <option value="Public Safety (TS Police)">Public Safety (TS Police)</option>
                      <option value="Others">Others</option>
                    </select>
                  </div>
                  
                  <div class="form-group">
                    <label for="priority">Priority</label>
                    <select id="priority" name="priority" required>
                      <option value="">Select priority</option>
                      <option value="Low">Low</option>
                      <option value="Medium">Medium</option>
                      <option value="High">High</option>
                    </select>
                  </div>
                  
                  <div class="form-group">
                    <label for="location">Location</label>
                    <input type="text" id="location" name="location" required placeholder="e.g., Hanamkonda, Warangal">
                  </div>
                  
                  <div class="form-group">
                    <label for="description">Detailed Description</label>
                    <textarea id="description" name="description" rows="5" required placeholder="Provide detailed information about the issue..."></textarea>
                  </div>
                  
                  <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Submit Complaint</button>
                    <button type="button" class="btn btn-outline" onclick="navigate('user-dashboard')">Cancel</button>
                  </div>
                </form>
              </div>
            </div>
          `;
        }

        // ========== MODAL COMPONENTS ==========
        function showUpdateModal(complaint) {
          const modal = document.createElement('div');
          modal.className = 'modal-overlay';
          modal.innerHTML = `
            <div class="modal-content">
              <div class="modal-header">
                <h3>Update Complaint Status</h3>
                <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">&times;</button>
              </div>
              <form onsubmit="handleUpdateComplaint(event, '${complaint.id}')">
                <div class="form-group">
                  <label for="status">Status</label>
                  <select id="status" name="status" required>
                    <option value="Pending" ${complaint.status === 'Pending' ? 'selected' : ''}>Pending</option>
                    <option value="In Progress" ${complaint.status === 'In Progress' ? 'selected' : ''}>In Progress</option>
                    <option value="Resolved" ${complaint.status === 'Resolved' ? 'selected' : ''}>Resolved</option>
                  </select>
                </div>
                
                <div class="form-group">
                  <label for="department">Assign to Department</label>
                  <select id="department" name="department" required>
                    <option value="">Select department</option>
                    <option value="Municipal Corp (GHMC/GWMC)" ${complaint.assignedDepartment === 'Municipal Corp (GHMC/GWMC)' ? 'selected' : ''}>Municipal Corp (GHMC/GWMC)</option>
                    <option value="Water Board (HMWSSB)" ${complaint.assignedDepartment === 'Water Board (HMWSSB)' ? 'selected' : ''}>Water Board (HMWSSB)</option>
                    <option value="Electricity (TSSPDCL/TSNPDCL)" ${complaint.assignedDepartment === 'Electricity (TSSPDCL/TSNPDCL)' ? 'selected' : ''}>Electricity (TSSPDCL/TSNPDCL)</option>
                    <option value="Sanitation Dept" ${complaint.assignedDepartment === 'Sanitation Dept' ? 'selected' : ''}>Sanitation Dept</option>
                    <option value="Roads (R&B)" ${complaint.assignedDepartment === 'Roads (R&B)' ? 'selected' : ''}>Roads (R&B)</option>
                    <option value="Public Safety (TS Police)" ${complaint.assignedDepartment === 'Public Safety (TS Police)' ? 'selected' : ''}>Public Safety (TS Police)</option>
                  </select>
                </div>
                
                <div class="form-group">
                  <label for="admin-comments">Admin Comments</label>
                  <textarea id="admin-comments" name="comments" placeholder="Add comments for the user...">${complaint.adminComments || ''}</textarea>
                </div>
                
                <div class="form-actions">
                  <button type="submit" class="btn btn-primary">Update</button>
                  <button type="button" class="btn btn-outline" onclick="this.closest('.modal-overlay').remove()">Cancel</button>
                </div>
              </form>
            </div>
          `;
          document.body.appendChild(modal);
        }

        function showFeedbackModal(complaintId) {
          const modal = document.createElement('div');
          modal.className = 'modal-overlay';
          modal.innerHTML = `
            <div class="modal-content">
              <div class="modal-header">
                <h3>Provide Feedback</h3>
                <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">&times;</button>
              </div>
              <form onsubmit="handleSubmitFeedback(event, '${complaintId}')">
                <div class="form-group">
                  <label for="rating">Rating</label>
                  <select id="rating" name="rating" required>
                    <option value="">Select rating</option>
                    <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Excellent</option>
                    <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê Good</option>
                    <option value="3">‚≠ê‚≠ê‚≠ê Average</option>
                    <option value="2">‚≠ê‚≠ê Poor</option>
                    <option value="1">‚≠ê Very Poor</option>
                  </select>
                </div>
                
                <div class="form-group">
                  <label for="feedback">Feedback</label>
                  <textarea id="feedback" name="feedback" required placeholder="Share your experience and feedback..."></textarea>
                </div>
                
                <div class="form-actions">
                  <button type="submit" class="btn btn-primary">Submit Feedback</button>
                  <button type="button" class="btn btn-outline" onclick="this.closest('.modal-overlay').remove()">Cancel</button>
                </div>
              </form>
            </div>
          `;
          document.body.appendChild(modal);
        }

        // ========== EVENT HANDLERS ==========
        function handleLogin(event) {
          event.preventDefault();
          const formData = new FormData(event.target);
          login(formData.get('email'), formData.get('password'), 'user');
        }

        function handleAdminLogin(event) {
          event.preventDefault();
          const formData = new FormData(event.target);
          login(formData.get('email'), formData.get('password'), 'admin');
        }

        function handleRegister(event) {
          event.preventDefault();
          const formData = new FormData(event.target);
          register(formData.get('email'), formData.get('password'), formData.get('name'));
        }

        function handleSubmitComplaint(event) {
          event.preventDefault();
          const formData = new FormData(event.target);
          submitComplaint({
            title: formData.get('title'),
            category: formData.get('category'),
            priority: formData.get('priority'),
            location: formData.get('location'),
            description: formData.get('description')
          });
        }

        function handleUpdateComplaint(event, complaintId) {
          event.preventDefault();
          const formData = new FormData(event.target);
          updateComplaintStatus(
            complaintId,
            formData.get('status'),
            formData.get('comments'),
            formData.get('department')
          );
          document.querySelector('.modal-overlay').remove();
        }

        function handleSubmitFeedback(event, complaintId) {
          event.preventDefault();
          const formData = new FormData(event.target);
          submitFeedback(
            complaintId,
            formData.get('feedback'),
            parseInt(formData.get('rating'))
          );
          document.querySelector('.modal-overlay').remove();
        }

        // ========== SIMULATION FUNCTION ==========
        function simulateComplaintActivity() {
            console.log("Running complaint simulation...");

            // 1. Try to solve an existing complaint
            const unsolvedComplaint = state.complaints.find(c => c.status === 'Pending' || c.status === 'In Progress');
            if (unsolvedComplaint) {
                unsolvedComplaint.status = 'Resolved';
                unsolvedComplaint.adminComments = 'This issue has been automatically resolved by the system.';
                unsolvedComplaint.assignedDepartment = 'System Maintenance';
                unsolvedComplaint.lastUpdated = getCurrentDate();
                console.log(`Complaint ${unsolvedComplaint.id} marked as Resolved.`);
            }

            // 2. Generate a new complaint
            const userPool = state.users.filter(u => u.role === 'user');
            if (userPool.length > 0) {
                const randomUser = userPool[Math.floor(Math.random() * userPool.length)];
                
                const titles = ["Irregular water supply", "Garbage not collected in Kukatpally", "Pothole on Warangal-Hyderabad Hwy", "Bhadrakali Temple park light broken", "Stray dog issue near bus stand"];
                const categories = ["Infrastructure", "Water Supply (Mission Bhagiratha)", "Electricity (TSSPDCL/TSNPDCL)", "Sanitation (GHMC/GWMC)", "Roads (R&B)", "Public Safety (TS Police)", "Others"];
                const priorities = ["Low", "Medium", "High"];
                const locations = ["Kukatpally, Hyderabad", "Hanamkonda, Warangal", "Karimnagar Town", "Nizamabad", "Adilabad"];
                const descriptions = [
                    "Water supply is very irregular for the past 3 days.", 
                    "GHMC sanitation team missed our street this week.", 
                    "A large pothole on the highway is causing traffic issues.", 
                    "The main light in Bhadrakali park is out.", 
                    "A stray dog has been seen near the Warangal bus stand."
                ];

                const randomIndex = Math.floor(Math.random() * titles.length);

                const newComplaint = {
                    id: generateComplaintId(),
                    userId: randomUser.email,
                    title: titles[randomIndex],
                    category: categories[Math.floor(Math.random() * categories.length)],
                    priority: priorities[Math.floor(Math.random() * priorities.length)],
                    status: 'Pending',
                    location: locations[Math.floor(Math.random() * locations.length)],
                    description: descriptions[randomIndex],
                    dateSubmitted: getCurrentDate(),
                    lastUpdated: getCurrentDate(),
                    assignedDepartment: null,
                    adminComments: null,
                    userFeedback: null,
                    rating: null
                };
                
                state.complaints.push(newComplaint);
                console.log(`Generated new complaint ${newComplaint.id} for ${randomUser.email}.`);
            }

            // 3. Re-render if on a dashboard page
            if (state.currentPage === 'user-dashboard' || state.currentPage === 'admin-dashboard') {
                render();
            }
        }

        // ========== MAIN RENDER FUNCTION ==========
        function render() {
          const root = document.getElementById('root');
          let content = '';
          
          // Add header
          content += createHeader();
          
          // Add page content based on current page
          switch(state.currentPage) {
            case 'home':
              content += createHomePage();
              break;
            case 'login':
              content += createLoginPage();
              break;
            case 'admin-login':
              content += createAdminLoginPage();
              break;
            case 'register':
              content += createRegisterPage();
              break;
            case 'user-dashboard':
              if (state.currentUser && state.currentUser.role === 'user') {
                content += createUserDashboard();
              } else {
                navigate('login');
                return;
              }
              break;
            case 'admin-dashboard':
              if (state.currentUser && state.currentUser.role === 'admin') {
                content += createAdminDashboard();
              } else {
                navigate('admin-login');
                return;
              }
              break;
            case 'submit-complaint':
              if (state.currentUser && state.currentUser.role === 'user') {
                content += createSubmitComplaintPage();
              } else {
                navigate('login');
                return;
              }
              break;
            default:
              content += createHomePage();
          }
          
          root.innerHTML = content;
        }

        // ========== INITIALIZATION ==========
        document.addEventListener('DOMContentLoaded', () => {
          render();
          // Start the simulation
          setInterval(simulateComplaintActivity, 60000); // 60000ms = 60 seconds
        });
    </script>
</body>
</html>
